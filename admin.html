<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NeuroGallery -- Admin Panel</title>
<style>
body{background:#0d0f13;color:#f2f2f2;font-family:Inter,system-ui,sans-serif;margin:0;padding:20px}
h1{color:#00e0ff}
button{background:#00e0ff;color:#000;border:none;padding:8px 15px;margin:5px;border-radius:6px;cursor:pointer;font-weight:600;transition:.3s}
button:hover{background:#ffd166}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-top:20px}
.card{background:#181a20;padding:10px;border-radius:10px;text-align:center}
.card img{width:100%;border-radius:8px;margin-bottom:8px}
.hidden{display:none}
</style>
</head>
<body>
<h1>NeuroGallery -- Admin Panel</h1>
<p><button id="loginBtn">Login with Google</button> <span id="adminStatus"></span></p>
<div id="grid" class="grid"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
import { getFirestore, getDocs, updateDoc, deleteDoc, doc, collection } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";

// ‚úÖ Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyCK-o9vIFlrlySSyfamIf9bzL3BqNGIq3o",
  authDomain: "neurogaller.firebaseapp.com",
  projectId: "neurogaller",
  storageBucket: "neurogaller.appspot.com",
  messagingSenderId: "353726562637",
  appId: "1:353726562637:web:8b2a53a1081b43a3cdb704",
  measurementId: "G-2VW3RB5320"
};

// ‚úÖ Initialize Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

const ADMIN_EMAIL = "ingfin14@gmail.com";
const loginBtn = document.getElementById("loginBtn");
const adminStatus = document.getElementById("adminStatus");
const grid = document.getElementById("grid");

// üîπ Login button
loginBtn.onclick = async () => {
  try {
    await signInWithPopup(auth, provider);
  } catch (err) {
    alert("‚ùå Login error: " + err.message);
  }
};

// üîπ Track login state
onAuthStateChanged(auth, async (user) => {
  if (!user) {
    adminStatus.textContent = "Not logged in.";
    grid.innerHTML = "";
    return;
  }

  if (user.email !== ADMIN_EMAIL) {
    adminStatus.textContent = `Access denied for ${user.email}`;
    grid.innerHTML = "";
    return;
  }

  adminStatus.textContent = `‚úÖ Logged in as admin (${user.email})`;
  loadImages();
});

// üîπ Load all images from Firestore
async function loadImages() {
  grid.innerHTML = "<p>Loading images...</p>";
  const snap = await getDocs(collection(db, "images"));
  grid.innerHTML = "";
  snap.forEach(d => {
    const data = d.data();
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <img src="${data.url}" alt="">
      <p>${data.title || "Untitled"}</p>
      <p>Status: <strong>${data.status || "pending"}</strong></p>
      <button onclick="approve('${d.id}')">Approve</button>
      <button onclick="remove('${d.id}')">Delete</button>
    `;
    grid.appendChild(div);
  });
}

// üîπ Approve image
window.approve = async (id) => {
  await updateDoc(doc(db, "images", id), { status: "approved" });
  alert("‚úÖ Image approved");
  loadImages();
};

// üîπ Delete image
window.remove = async (id) => {
  await deleteDoc(doc(db, "images", id));
  alert("üóëÔ∏è Image deleted");
  loadImages();
};
</script>
</body>
</html>t = " | Admin";
      adminLink.style = "color:var(--accent);margin-left:8px;text-decoration:none;";
      userInfo.appendChild(adminLink);
    }

  } else {
    userInfo.textContent = "";
    loginBtn.textContent = "Login with Google";
  }
});
</script>
</body>
</html>